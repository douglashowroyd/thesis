\chapter{Converting between different congruence representations}
\label{chap:converting}

A congruence is a binary relation, and therefore is formally described as a set
of pairs---a subset of $S \times S$.  In a computational setting, it is worth
thinking about how a congruence could be stored.

One approach to storing a congruence $\rho$ on a semigroup $S$ is simply to
store every one of the pairs in $\rho$.  In principle, it is possible to store
$\rho$ in this way if and only if $S$ is finite.  However, this could well use a
lot of storage---even the trivial congruence would use $O(|S|)$ space, and in
general a congruence could even use $O(|S|^2)$ space.

% TODO: reference to "most congs don't need many generating pairs" section
In Chapter \ref{chap:pairs} we looked in detail at how a congruence can be
represented by a set of generating pairs.  As we found there, a congruence can
be described by a subset $\mathbf{R} \subseteq \rho$, which in many cases can be
very small.  This is one very generic way of representing congruences, in two
senses: firstly that it can be used for any finite semigroup; and secondly that
it can be used for left and right congruences.

However, there are other ways to view congruences in certain circumstances,
either based on a special property of the semigroup in question, or based on
properties of some individual congruences.  In this chapter, we will describe
some important ways of representing congruences, and then consider ways of
converting one to another.

\section{Ways of representing a congruence}

\subsection{Generating pairs}
Recall that a congruence $\rho$ on a semigroup $S$ can be stored using
a subset of the pairs in $\rho$.  If $\mathbf{R}$ is a subset of $S \times S$,
then we can say that $\mathbf{R}$ \textit{generates} a congruence.  The
congruence \textit{generated by} $\mathbf{R}$ is defined as the least congruence
on $S$ containing all the pairs in $\mathbf{R}$; equivalently, it is defined as
the intersection of all congruences on $S$ containing all the pairs in
$\mathbf{R}$.  It is denoted by $\mathbf{R}^\sharp$ (see Theorem
\ref{thm:rsharp}).  We have similarly defined the left congruence generated by
$\mathbf{R}$ (denoted by $\mathbf{R}^\triangleleft$), and the right congruence
generated by $\mathbf{R}$ (denoted by $\mathbf{R}^\triangleright$).
A full explanation of how generating pairs can be used to represent congruences
is given in Section \ref{sec:intro-gen-pairs}, an approach for computing
properties of congruences using their generating pairs is given in Chapter
\ref{chap:pairs}.

Given a set of pairs $\mathbf{R}$, we may wish to produce the congruence
$\mathbf{R}^\sharp$ and represent it using one of the other methods described in
this chapter.  It is of course possible to calculate the set of all pairs in
$\mathbf{R}^\sharp$ and convert that to the other representation; however, in
order to find other representations with as little work as possible, it is
desirable to use the pairs in $\mathbf{R}$ directly, calculating as few extra
pairs as possible.  Conversely, if we wish to convert another representation for
a congruence $\rho$ to a set of generating pairs, it is desirable to find as
small a set of pairs as possible.  When converting between generating pairs and
other representations, these will be the goals.

\subsection{Completely (0-)simple: linked triples}
\subsection{Inverse semigroups: kernel-trace pairs}
\subsection{Rees congruences}
A \textbf{Rees congruence} is a congruence on a semigroup $S$ with a distinguished
congruence class $I$ which is a two-sided ideal of $S$, and in which every other
congruence class is a singleton.  We may write this congruence as $\rho_I$, and
we may write its quotient $S/\rho_I$ as $S/I$.

Some or all of a semigroup's congruences may be Rees: in particular, since $S$
is an ideal of $S$, the universal congruence $S \times S$ is a Rees congruence.

Another type of congruence is one given by a set of generating pairs: if $R
\subset S \times S$, then we let $R^\sharp$ be the least congruence on $S$
containing all the pairs in $R$.  We describe $R$ as a set of \textbf{generating
  pairs} for $R^\sharp$, and any congruence on $S$ can be described in this way.

\subsection{Regular semigroups: something like kernel-trace?}

\section{Generating pairs of a Rees congruence}
\label{sec:rees-to-pairs}
A natural question, given an ideal $I$, is how to find a set of generating pairs
for $\rho_I$.

\begin{theorem}
  Let $S$ be a semigroup, $I$ an ideal of $S$, and $X$ an ideal generating set
  for $I$.  Also let $M$ be the minimal ideal of $S$ (which may or may not be
  equal to $I$).  Then $$X \times M$$ is a set of generating pairs for the Rees
  congruence $\rho_I$.
  \begin{proof}
    Let $\rho$ be the congruence generated by $X \times M$.  First we show that
    $\rho \subseteq \rho_I$, and then that $\rho_I \subseteq \rho$.

    Let $(i,m) \in X \times M$.  We have $X \subseteq I$ since $X$ is a
    generating set for $I$, and $M \subseteq I$ since $M$ is contained in any
    ideal of $S$.  Hence $i$ and $m$ both lie in $I$, so they are in the same
    class of the Rees congruence: $(i,m) \in \rho_I$.  Hence $X \times M
    \subseteq \rho_I$, and so $\rho$ (the least congruence containing $X \times
    M$) must also be contained in $\rho_I$.  Hence $\rho \subseteq \rho_I$.

    Now let $(a,b) \in \rho_I$; we wish to show that $(a,b) \in \rho$.  If $a=b$
    then we certainly have $(a,b) \in \rho$.  Otherwise we must have $a,b \in
    I$.  Since $X$ \textit{generates} $I$, we have $I = S^1XS^1$.  Therefore we
    can write
    $$a = s_1x_1t_1, \quad b = s_2x_2t_2,$$
    for some $x_1,x_2 \in X$ and $s_1,s_2,t_1,t_2 \in S^1$.

    Now choose some $m \in M$.  By definition $(x_1,m), (x_2,m) \in \rho$ since
    $X \times M \subseteq \rho$, and
    by the compatibility properties of a congruence,
    $$(s_1x_1t_1,s_1mt_1), (s_2x_2t_2,s_2mt_2) \in \rho.$$

    Since $m \in M$, we must have $s_1mt_1,s_2mt_2 \in M$.  Let $x_0$ be an
    arbitrary element of $X$.
    We see $(x_0,s_1mt_1), (x_0,s_2mt_2) \in X \times M$, and so by transitivity
    $(s_1mt_1, s_2mt_2) \in \rho$.
    Hence
    $$a ~=~ s_1x_1t_1 ~\rho~ s_1mt_1 ~\rho~ s_2mt_2 ~\rho~ s_2x_2t_2 = b,$$
    and $(a,b) \in \rho$ as required.
  \end{proof}
\end{theorem}

\section{Kernel and trace from generating pairs}
\label{sec:pairs-to-kertr}

\section{Generating pairs from kernel and trace}
\label{sec:kertr-to-pairs}
