\chapter{Converting between different congruence representations}
\label{chap:converting}

A congruence is a binary relation, and therefore is formally described as a set
of pairs---a subset of $S \times S$.  In a computational setting, it is worth
thinking about how a congruence could be stored.

One approach to storing a congruence $\rho$ on a semigroup $S$ is simply to
store every one of the pairs in $\rho$.  In principle, it is possible to store
$\rho$ in this way if and only if $S$ is finite.  However, this could well use a
lot of storage---even the trivial congruence would use $O(|S|)$ space, and in
general a congruence could even use $O(|S|^2)$ space.

% TODO: reference to "most congs don't need many generating pairs" section
In Chapter \ref{chap:pairs} we looked in detail at how a congruence can be
represented by a set of generating pairs.  As we found there, a congruence can
be described by a subset $\mathbf{R} \subseteq \rho$, which in many cases can be
very small.  This is one very generic way of representing congruences, in two
senses: firstly that it can be used for any finite semigroup; and secondly that
it can be used for left and right congruences.

However, there are other ways to view congruences in certain circumstances,
either based on a special property of the semigroup in question, or based on
properties of some individual congruences.  In this chapter, we will describe
some important ways of representing congruences, and then consider ways of
converting one to another.

\section{Ways of representing a congruence}

\subsection{Generating pairs}
Recall that a congruence $\rho$ on a semigroup $S$ can be stored using
a subset of the pairs in $\rho$.  If $\mathbf{R}$ is a subset of $S \times S$,
then we can say that $\mathbf{R}$ \textit{generates} a congruence.  The
congruence \textit{generated by} $\mathbf{R}$ is defined as the least congruence
on $S$ containing all the pairs in $\mathbf{R}$; equivalently, it is defined as
the intersection of all congruences on $S$ containing all the pairs in
$\mathbf{R}$.  It is denoted by $\mathbf{R}^\sharp$ (see Theorem
\ref{thm:rsharp}).  We have similarly defined the left congruence generated by
$\mathbf{R}$ (denoted by $\mathbf{R}^\triangleleft$), and the right congruence
generated by $\mathbf{R}$ (denoted by $\mathbf{R}^\triangleright$).
A full explanation of how generating pairs can be used to represent congruences
is given in Section \ref{sec:intro-gen-pairs}, an approach for computing
properties of congruences using their generating pairs is given in Chapter
\ref{chap:pairs}.

Given a set of pairs $\mathbf{R}$, we may wish to produce the congruence
$\mathbf{R}^\sharp$ and represent it using one of the other methods described in
this chapter.  It is of course possible to calculate the set of all pairs in
$\mathbf{R}^\sharp$ and convert that to the other representation; however, in
order to find other representations with as little work as possible, it is
desirable to use the pairs in $\mathbf{R}$ directly, calculating as few extra
pairs as possible.  Conversely, if we wish to convert another representation for
a congruence $\rho$ to a set of generating pairs, it is desirable to find as
small a set of pairs as possible.  When converting between generating pairs and
other representations, these will be the goals.

\subsection{Groups: normal subgroups}
\label{sec:normal-subgroups}

\subsection{Completely (0-)simple semigroups: linked triples}
\label{sec:linked-triples}

There is a special way of describing a congruence on a completely simple or
completely 0-simple semigroup: using a linked triple.  We will start by
explaining the terms completely simple and completely 0-simple, then define a
semigroup's linked triples and explain how they are related to its congruences.

\begin{definition}
  \label{def:zerosimple}
  A semigroup $S$ is:
  \begin{itemize}
  \item \textbf{simple} if its only ideal is $S$;
  \item \textbf{0-simple} if it has a zero, and its only ideals are $S$ and
    $\{0\}$.
  \end{itemize}
\end{definition}

Simple and 0-simple semigroups are closely related.  Note that if $S$ is a
simple semigroup, then $S^0$, the semigroup created by appending a zero element
to $S$, is 0-simple.

Next, we consider a slightly stronger condition.

\begin{definition}
  \label{def:completelyzerosimple}
  A semigroup is:
  \begin{itemize}
  \item \textbf{completely simple} if it is simple and contains a primitive
    idempotent;
  \item \textbf{completely 0-simple} if it is 0-simple and contains a primitive
    idempotent.
  \end{itemize}
  An idempotent $p \in S$ is \textbf{primitive} if it is non-zero and there is
  no other non-zero idempotent $i \in S$ such that $ip = pi = i$.
  %TODO: rephrase in terms of partial ordering of idempotents?
\end{definition}

Definitions \ref{def:zerosimple} and \ref{def:completelyzerosimple} are
equivalent for finite semigroups---that is to say, a finite semigroup is
completely simple if and only if it is simple, and it is completely 0-simple if
and only if it is 0-simple.  Some of the conversions described in this chapter
will be applicable only to finite semigroups, and in those circumstances we will
refer to \textit{finite simple} or \textit{finite 0-simple} semigroups, knowing
that these are completely simple or completely 0-simple, respectively.
Note that a finite semigroup is simple if and only if it is $\JJ$-trivial.
%TODO: only finite?

Completely simple and completely 0-simple semigroups have a strong and useful
isomorphism property, which allows us to say a great deal about their structure
and, in particular, their congruences.  We will consider first the more
complicated case, that of completely 0-simple semigroups, and then we will go on
to explain the easier case, completely simple semigroups.

\begin{definition}
  \label{def:rzms}
  A \textbf{Rees 0-matrix semigroup} $\mathcal{M}^0[T;I,\Lambda;P]$ is the set
  $$(I \times T \times \Lambda) \cup \{0\}$$
  with multiplication given by
  $$(i,a,\lambda) \cdot (j,b,\mu) = \left\{
    \begin{array}{l l}
      (i,ap_{\lambda j}b, \mu) & \text{if~} p_{\lambda j} \neq 0, \\
      0 & \text{otherwise,}
    \end{array}
  \right.$$
  where
  \begin{itemize}
  \item $T$ is a semigroup,
  \item $I$ and $\Lambda$ are index sets,
  \item $P$ is a $|\Lambda| \times |I|$ matrix with entries $(p_{\lambda
      i})_{\lambda \in \Lambda, i \in I}$
    taken from $T^0$,
  \item $0x=x0=0$ for all $x$ in the semigroup.
  \end{itemize}
  \cite[\S 3.2]{howie}
\end{definition}

We will require a certain property of the matrix $P$, which we should define
first.  We will call a matrix $P$ \textbf{regular} if it contains at least one
non-zero entry in each row and each column.

The following theorem shows how we can use Rees 0-matrix semigroups to classify
completely 0-simple semigroups.

\begin{theorem}[Rees]
  \label{thm:rees}
  Every completely 0-simple semigroup is isomorphic to a Rees 0-matrix semigroup
  $\mathcal{M}^0[G;I,\Lambda;P]$, where $G$ is a group and $P$ is regular.
  Conversely, every such Rees 0-matrix semigroup is completely 0-simple.
  \begin{proof}
    Theorem 3.2.3 in \cite[p.72-75]{howie}.
  \end{proof}
\end{theorem}

Now we can describe any finite 0-simple semigroup as its isomorphic Rees
0-matrix semigroup.  Hence we can restrict our further investigations just to
this type of semigroup.  From now on, when we see a Rees 0-matrix semigroup over
$G$, we will assume that $G$ is a group.  Hence ``a finite 0-simple Rees
0-matrix semigroup $\mathcal{M}^0[G;I,\Lambda;P]$'' refers to a finite 0-simple
Rees 0-matrix semigroup over a group, with a regular matrix $P$.

Next we consider the congruences of a finite 0-simple semigroup.

\begin{definition}
  \label{def:linked-triple}
  Let $S$ be a completely 0-simple Rees 0-matrix semigroup
  $\mathcal{M}^0[G;I,\Lambda;P]$.  A \textbf{linked triple} on $S$ is a
  triple $$(N,\mathcal{S},\mathcal{T})$$ consisting of a normal subgroup
  $N \trianglelefteq G$, an equivalence relation $\mathcal{S}$ on $I$ and an
  equivalence relation $\mathcal{T}$ on $\Lambda$, such that the following are
  satisfied:
  \begin{enumerate}
  \item $\mathcal{S} \subseteq \varepsilon_I$, where $\varepsilon_I =
    \left\{(i,j) \in I \times I\, \middle|\, \forall \lambda \in \Lambda:
      p_{\lambda i}=0 \iff p_{\lambda j}=0 \right\}$,
  \item $\mathcal{T} \subseteq \varepsilon_\Lambda$, where $\varepsilon_\Lambda
    = \left\{(\lambda,\mu) \in \Lambda \times \Lambda\, \middle|\, \forall i \in
      I: p_{\lambda i}=0 \iff p_{\mu i}=0 \right\}$,
  \item For all $i,j \in I$ and $\lambda, \mu \in \Lambda$ such that
    $p_{\lambda i}, p_{\lambda j}, p_{\mu i}, p_{\mu j} \neq 0$ and either
    $(i,j) \in \mathcal{S}$ or $(\lambda,\mu) \in \mathcal{T}$, we have that
    $q_{\lambda \mu i j} \in N$, where
    $$q_{\lambda \mu i j} = p_{\lambda i} p_{\mu i}^{-1} p_{\mu j} p_{\lambda
      j}^{-1}.$$
  \end{enumerate}
  \cite[p.86]{howie}
\end{definition}

We can associate the linked triples of a finite 0-simple semigroup with its
non-universal congruences.

\begin{theorem}
  \label{thm:linked-triple}
  Let $S$ be a finite 0-simple Rees 0-matrix semigroup.  There exists a
  bijection $\Gamma$ from the non-universal congruences on $S$ to the linked
  triples on $S$.
\end{theorem}

This theorem shows us an alternative way to look at congruences on completely
0-simple semigroups, just as normal subgroups show us an alternative way to look
at congruences on groups.  However, in order to use this at all in a
computational setting, we must have a concrete function $\Gamma$ which we can
use to convert a congruence to a linked triple and back again, rather than just
the knowledge that such a function exists.  We define the function $\Gamma$ as
follows.

% TODO: \Gamma

While in this paper we are concentrating on finite 0-simple semigroups, it
should be noted that a very similar representation exists for finite
\emph{simple} semigroups (Rees matrix semigroups), and the functions described
operate in almost exactly the same way, except for the removal of complications
related to the zero element.  In this system, the universal congruence can also
be represented by a linked triple, namely $(G, I \times I, \Lambda \times
\Lambda)$. \cite[p.90-91]{howie}

Since the theory is so similar, we will not explain the finite simple case
in any more detail, and instead we will restrict our arguments to semigroups
\emph{with} zero, apart from a brief excursion to Rees matrix semigroups in
Theorem \ref{thm:withoutzero}.  However, a future implementation of this theory
in GAP could be useful, and would be a logical extension of this project.



\subsection{Inverse semigroups: kernel-trace pairs}
\subsection{Rees congruences}
A \textbf{Rees congruence} is a congruence on a semigroup $S$ with a distinguished
congruence class $I$ which is a two-sided ideal of $S$, and in which every other
congruence class is a singleton.  We may write this congruence as $\rho_I$, and
we may write its quotient $S/\rho_I$ as $S/I$.

Some or all of a semigroup's congruences may be Rees: in particular, since $S$
is an ideal of $S$, the universal congruence $S \times S$ is a Rees congruence.

Another type of congruence is one given by a set of generating pairs: if $R
\subset S \times S$, then we let $R^\sharp$ be the least congruence on $S$
containing all the pairs in $R$.  We describe $R$ as a set of \textbf{generating
  pairs} for $R^\sharp$, and any congruence on $S$ can be described in this way.

\subsection{Regular semigroups: something like kernel-trace?}

\section{Generating pairs of a Rees congruence}
\label{sec:rees-to-pairs}
A natural question, given an ideal $I$, is how to find a set of generating pairs
for $\rho_I$.

\begin{theorem}
  Let $S$ be a semigroup, $I$ an ideal of $S$, and $X$ an ideal generating set
  for $I$.  Also let $M$ be the minimal ideal of $S$ (which may or may not be
  equal to $I$).  Then $$X \times M$$ is a set of generating pairs for the Rees
  congruence $\rho_I$.
  \begin{proof}
    Let $\rho$ be the congruence generated by $X \times M$.  First we show that
    $\rho \subseteq \rho_I$, and then that $\rho_I \subseteq \rho$.

    Let $(i,m) \in X \times M$.  We have $X \subseteq I$ since $X$ is a
    generating set for $I$, and $M \subseteq I$ since $M$ is contained in any
    ideal of $S$.  Hence $i$ and $m$ both lie in $I$, so they are in the same
    class of the Rees congruence: $(i,m) \in \rho_I$.  Hence $X \times M
    \subseteq \rho_I$, and so $\rho$ (the least congruence containing $X \times
    M$) must also be contained in $\rho_I$.  Hence $\rho \subseteq \rho_I$.

    Now let $(a,b) \in \rho_I$; we wish to show that $(a,b) \in \rho$.  If $a=b$
    then we certainly have $(a,b) \in \rho$.  Otherwise we must have $a,b \in
    I$.  Since $X$ \textit{generates} $I$, we have $I = S^1XS^1$.  Therefore we
    can write
    $$a = s_1x_1t_1, \quad b = s_2x_2t_2,$$
    for some $x_1,x_2 \in X$ and $s_1,s_2,t_1,t_2 \in S^1$.

    Now choose some $m \in M$.  By definition $(x_1,m), (x_2,m) \in \rho$ since
    $X \times M \subseteq \rho$, and
    by the compatibility properties of a congruence,
    $$(s_1x_1t_1,s_1mt_1), (s_2x_2t_2,s_2mt_2) \in \rho.$$

    Since $m \in M$, we must have $s_1mt_1,s_2mt_2 \in M$.  Let $x_0$ be an
    arbitrary element of $X$.
    We see $(x_0,s_1mt_1), (x_0,s_2mt_2) \in X \times M$, and so by transitivity
    $(s_1mt_1, s_2mt_2) \in \rho$.
    Hence
    $$a ~=~ s_1x_1t_1 ~\rho~ s_1mt_1 ~\rho~ s_2mt_2 ~\rho~ s_2x_2t_2 = b,$$
    and $(a,b) \in \rho$ as required.
  \end{proof}
\end{theorem}

\section{Kernel and trace from generating pairs}
\label{sec:pairs-to-kertr}

\section{Generating pairs from kernel and trace}
\label{sec:kertr-to-pairs}
