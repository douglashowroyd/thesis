\documentclass[a4paper]{report}

% Packages
\usepackage[nodisplayskipstretch]{setspace} % must be before algorithm & float
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{aliascnt}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{array}
\usepackage{cancel}
\usepackage{dot2texi}
\usepackage{draftwatermark}
\usepackage{enumerate}
\usepackage{float}
\usepackage[colorlinks]{hyperref}
\usepackage[iso, UKenglish]{isodate}
\usepackage{lipsum}
\usepackage{longtable}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{pstricks}
\usepackage{svg}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{url}
\usepackage{xcolor}
\usepackage{xfrac}

% Other library imports
\usetikzlibrary{arrows,shapes}

% Hyperlink references (invisible)
\hypersetup{linkcolor=black, urlcolor=black, citecolor=black}

% Fix double spacing in arrays
\setlength{\jot}{-1ex}
\renewcommand*\arraystretch{.7}

% Watermark with git hash
\immediate\write18{git rev-parse --short HEAD > hash.info}
\immediate\write18{git diff --shortstat > changes.info}
\immediate\write18{git diff --staged --shortstat >> changes.info}
\SetWatermarkText{Commit \input{hash.info} \quad \input{changes.info}}
\SetWatermarkColor[gray]{0.75}
\SetWatermarkFontSize{0.5cm}
\SetWatermarkAngle{90}
\SetWatermarkHorCenter{3cm}

% Macros
\input{macros}

% Object numbering
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{proposition}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

\newcounter{common}[chapter]
\makeatletter
\let\c@algorithm\relax
\let\c@figure\relax
\let\c@table\relax
\let\c@theorem\relax
\makeatother
\newaliascnt{algorithm}{common}
\newaliascnt{figure}{common}
\newaliascnt{table}{common}
\newaliascnt{theorem}{common}
\renewcommand{\thealgorithm}{\thechapter.\arabic{algorithm}}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
\renewcommand{\thetable}{\thechapter.\arabic{table}}
\renewcommand{\thetheorem}{\thechapter.\arabic{theorem}}

% TODO: Actual title
\title{My PhD Thesis}
\author{Michael Torpey}

\begin{document}

\maketitle

\tableofcontents

\doublespacing

\include{abstract}

\include{intro}

\part{Algorithms}
\label{part:algorithms}
\include{ch-pairs}
\include{ch-lattice}
\include{ch-converting}

\part{Results}
\label{part:findings}
\include{ch-nrcongs}
\include{ch-princfact}
\include{ch-pn}

\bibliography{bibliography}
\bibliographystyle{plain}

\end{document}
